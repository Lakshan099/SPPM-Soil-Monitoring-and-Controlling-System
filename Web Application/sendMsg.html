<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Send Answer</title>
    <link rel="icon" type="image/png" href="images/logo1.png" />
    <link rel="stylesheet" href="chatMsg.css">

    <!-- font Awesome CDN -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.3/css/all.css"
        integrity="sha384-SZXxX4whJ79/gErwcOYf+zWLeJdY/qpuqC4cAa9rOGUstPomtqpuNWT9wdPEn2fk" crossorigin="anonymous">
</head>

<body>


    <div class="container">
        <div class="box">
            <h3>Get in Touch</h3>
            <div class="message-box">
                <textarea id="msg" cols="30" rows="5" placeholder="Message"></textarea>
            </div>
            <div class="message-box">
                <textarea id="ReMsg" cols="30" rows="5" placeholder="Reply Message"></textarea>
            </div>
            <div class="button">
                <button type="button" id="submitData" name="submitData" class="button button"
                    onclick="message()">Send</button>
            </div>
            <div class="message">
                <div class="success" id="success">Your Message Successfully Sent!</div>
                <div class="danger" id="danger">Feilds Can't be Empty!</div>
            </div>
        </div>
    </div>



    <script type="text/javascript">

        var msge = localStorage.getItem("ModQueeG");
        document.getElementById("msg").value = msge;

    </script>

    <script>

        var today = new Date();
        var date1 = today.getFullYear() + '-' + (today.getMonth() + 1) + '-' + today.getDate() + '-' + today.getHours() + ":" + today.getMinutes();
        console.log(date1);
    </script>

    <script src="chat.js"></script>
</body>

</html>

<script type="module">

    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.14.0/firebase-app.js";
    import { getFirestore, setDoc, addDoc, doc, collection } from "https://www.gstatic.com/firebasejs/9.14.0/firebase-firestore.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.14.0/firebase-analytics.js";


    // Your web app's Firebase configuration
    const firebaseConfig = {
            apiKey: "AIzaSyDcbgNq_rdZbYh23sO_3xoNOfq8YNs1iXg",
            authDomain: "soil-monitoring-system-e4988.firebaseapp.com",
            databaseURL: "https://soil-monitoring-system-e4988-default-rtdb.firebaseio.com",
            projectId: "soil-monitoring-system-e4988",
            storageBucket: "soil-monitoring-system-e4988.appspot.com",
            messagingSenderId: "666923002533",
            appId: "1:666923002533:web:f36904142d86e129233b4c",
            measurementId: "G-9395SHGK5D"
        };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    // Initialize Cloud Firestore and get a reference to the service
    const db = getFirestore(app);
    const analytics = getAnalytics(app);





    submitData.addEventListener('click', (e) => {
        
        var msg = document.getElementById('msg').value;
        var Remsg = document.getElementById('ReMsg').value;


        setDoc(doc(db, "Q&A", msg), {
            QuestionText: msg,
            AnswerText: Remsg,
            date: date1

        }).then(() => {

            window.close();

        });

    });


</script>