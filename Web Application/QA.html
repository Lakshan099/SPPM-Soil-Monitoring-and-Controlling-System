<!DOCTYPE html>
<html lang="en">

<head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
	<title>Q and A</title>
	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="components/css/bootstrap.min.css">
	<!----css3---->
	<link rel="stylesheet" href="components/css/custom.css">


	<!--google fonts -->
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">


	<!--google material icon-->
	<link href="https://fonts.googleapis.com/css2?family=Material+Icons" rel="stylesheet">

</head>

<body>



	<div class="wrapper">

		<!------top-navbar-start----------->

		<div class="top-navbar">
			<div class="xd-topbar">
				<div class="row">
					<div class="col-2 col-md-1 col-lg-1 order-2 order-md-1 align-self-center">
						<div class="xp-menubar">
							<span class="material-icons text-white">signal_cellular_alt</span>
						</div>
					</div>

					<div class="col-md-5 col-lg-3 order-3 order-md-2">
						<div class="xp-searchbar">
							<form>
								<div class="input-group">
									<input type="search" class="form-control" placeholder="Search">
									<div class="input-group-append">
										<button class="btn" type="submit" id="button-addon2">Go
										</button>
									</div>
								</div>
							</form>
						</div>
					</div>


					<div class="col-10 col-md-6 col-lg-8 order-1 order-md-3">
						<div class="xp-profilebar text-right">
							<nav class="navbar p-0">
								<ul class="nav navbar-nav flex-row ml-auto">
									<li class="dropdown nav-item active">
										<a class="nav-link" href="#" data-toggle="dropdown">
											<span class="material-icons">notifications</span>
											<span class="notification">4</span>
										</a>
										<ul class="dropdown-menu">
											<li><a href="#">You Have 4 New Messages</a></li>
											<li><a href="#">You Have 4 New Messages</a></li>
											<li><a href="#">You Have 4 New Messages</a></li>
											<li><a href="#">You Have 4 New Messages</a></li>
										</ul>
									</li>

									<li class="nav-item">
										<a class="nav-link" href="#">
											<span class="material-icons">question_answer</span>
										</a>
									</li>

									<li class="dropdown nav-item">
										<a class="nav-link" href="#" data-toggle="dropdown">
											<img src="img/user.jpg" style="width:40px; border-radius:50%;" />
											<span class="xp-user-live"></span>
										</a>
										<ul class="dropdown-menu small-menu">
											<li><a href="#">
													<span class="material-icons">person_outline</span>
													Profile
												</a></li>
											<li><a href="#">
													<span class="material-icons">settings</span>
													Settings
												</a></li>
											<li><a href="#">
													<span class="material-icons">logout</span>
													Logout
												</a></li>

										</ul>
									</li>


								</ul>
							</nav>
						</div>
					</div>

				</div>

				<div class="xp-breadcrumbbar text-center">
					<h4 class="page-title">Q and A</h4>
					<ol class="breadcrumb">
						<li class="breadcrumb-item"><a href="#">Q and A</a></li>
						<li class="breadcrumb-item active" aria-curent="page">Dashboard</li>
					</ol>
				</div>


			</div>
		</div>
		<!------top-navbar-end----------->


		<!------main-content-start----------->

		<div class="main-content">
			<div class="row">
				<div class="col-md-12">
					<div class="table-wrapper">

						<div class="table-title">
							<div class="row">
								<div class="col-sm-6 p-0 flex justify-content-lg-start justify-content-center">
									<h2 class="ml-lg-2">Q and A</h2>
								</div>
								<div class="col-sm-6 p-0 flex justify-content-lg-end justify-content-center">
									<a href="#addEmployeeModal" class="btn btn-success" data-toggle="modal">
										<i class="material-icons">&#xE147;</i>
										<span>Add Question</span>
									</a>
									<a href="#deleteEmployeeModal" class="btn btn-danger" data-toggle="modal">
										<i class="material-icons">&#xE15C;</i>
										<span>Delete</span>
									</a>
								</div>
							</div>
						</div>

						<table class="table table-striped table-hover">
							<thead>
								<tr>
									<th><span class="custom-checkbox">
											<input type="checkbox" id="selectAll">
											<label for="selectAll"></label></th>


									<th>Question</th>
									<th>Answer</th>
									<th>Date</th>
									<th>Reply</th>
								</tr>
							</thead>



							<tbody id="tbody1">
							</tbody>

						</table>

						<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog"
							aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
							<div class="modal-dialog modal-dialog-centered" role="document">
								<div class="modal-content">
									<div class="modal-header">
										<h5 class="modal-title" id="exampleModalLongTitle">Send Reply Message</h5>
										<button type="button" class="close" data-dismiss="modal" aria-label="Close">
											<span aria-hidden="true">&times;</span>
										</button>
									</div>
									<div class="modal-body">

										<label class="labs">Name</label>
										<input type="text" id="QueMod"><br>
										<label class="labs">Email</label>
										<input type="text" id="AnsMod"><br>
										<label class="labs">Location</label>
										<input type="text" id="DateMod"><br>


									</div>
									<div class="modal-footer">
										<button type="button" class="btn btn-secondary"
											data-dismiss="modal">Close</button>
										<button id="sendMsg" type="button" class="btn btn-primary"
											onclick="SendMsg()">Send
											Message</button>
									</div>
								</div>
							</div>
						</div>

						<script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-app.js"></script>
						<script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-auth.js"></script>
						<script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-firestore.js"></script>

						<script id="MainScript">
							// For Firebase JS SDK v7.20.0 and later, measurementId is optional
							const firebaseConfig = {
								apiKey: "AIzaSyDcbgNq_rdZbYh23sO_3xoNOfq8YNs1iXg",
								authDomain: "soil-monitoring-system-e4988.firebaseapp.com",
								databaseURL: "https://soil-monitoring-system-e4988-default-rtdb.firebaseio.com",
								projectId: "soil-monitoring-system-e4988",
								storageBucket: "soil-monitoring-system-e4988.appspot.com",
								messagingSenderId: "666923002533",
								appId: "1:666923002533:web:f36904142d86e129233b4c",
								measurementId: "G-9395SHGK5D"
							};

							firebase.initializeApp(firebaseConfig);
							let db = firebase.firestore();

							function GetAllDataOnce() {
								db.collection("Q&A").get().then((querySnapshot) => {
									var users = [];
									querySnapshot.forEach(doc => {
										users.push(doc.data());
									});
									AddAllItemsToTheTable(users);

								});
							}

							function GetAllDataRealtime() {
								db.collection("Q&A").onSnapshot((querySnapshot) => {
									var users = [];
									querySnapshot.forEach(doc => {
										users.push(doc.data());
									});
									AddAllItemsToTheTable(users);

								});

							}

							var userID = 0;
							var msgList = [];
							var tbody = document.getElementById('tbody1');

							function AddItemToTable(question, answer, date) {
								var trow = document.createElement('tr');
								var td1 = document.createElement('td');
								var td2 = document.createElement('td');
								var td3 = document.createElement('td');
								var td4 = document.createElement('td');


								msgList.push([question, answer, date]);


								td1.innerHTML = ++userID;
								td2.innerHTML = question;
								td3.innerHTML = answer;
								td4.innerHTML = date;



								trow.appendChild(td1);
								trow.appendChild(td2);
								trow.appendChild(td3);
								trow.appendChild(td4);

								var ControlDiv = document.createElement("div");
								ControlDiv.innerHTML = '<button type="button" class="btn btn-primary" onclick="FillTboxes('+ userID +')">Send Reply</button>'


								trow.appendChild(ControlDiv);
								tbody.appendChild(trow);
							}

							function AddAllItemsToTheTable(UserDocsList) {
								userID = 0;
								tbody.innerHTML = "";
								UserDocsList.forEach(element => {
									AddItemToTable(element.QuestionText, element.AnswerText, element.date);
								});
							}

							var ModQue = document.getElementById('QueMod');
							var ModAns = document.getElementById('AnsMod');
							var ModDate = document.getElementById('DateMod');
							var BTNmodAdd = document.getElementById('sendMsg');

							function FillTboxes(index) {
								console.log(ModQue.value);
								if (index == null) {
									ModQue.value = "";
									ModAns.value = "";
									ModDate.value = "";


								}
								else {
									--index;
									ModQue.value = msgList[index][0];
									ModAns.value = msgList[index][1];
									ModDate.value = msgList[index][2];

									console.log(ModQue.value);

									//ModEmail.disabled = true;
									BTNmodAdd.style.display = 'inline-block';
									localStorage.setItem("ModQueeG", ModQue.value);
									localStorage.setItem("ModAnsG", ModAns.value);
									localStorage.setItem("ModDateG", ModDate.value);

									console.log('open');

									window.open('sendMsg.html', '', 'height=800,width=800');
								}



							}



							window.onload = GetAllDataRealtime;
						</script>

						<div class="clearfix">
							<div class="hint-text"></div>
							<ul class="pagination">
								<li class="page-item disabled"><a href="#">Previous</a></li>
								<li class="page-item active"><a href="#" class="page-link">1</a></li>
								<li class="page-item "><a href="#" class="page-link">2</a></li>
								<li class="page-item "><a href="#" class="page-link">3</a></li>
								<li class="page-item "><a href="#" class="page-link">4</a></li>
								<li class="page-item "><a href="#" class="page-link">5</a></li>
								<li class="page-item "><a href="#" class="page-link">Next</a></li>
							</ul>
						</div>









					</div>
				</div>


				<!----add-modal start--------->
				<div class="modal fade" tabindex="-1" id="addEmployeeModal" role="dialog">
					<div class="modal-dialog" role="document">
						<div class="modal-content">
							<div class="modal-header">
								<h5 class="modal-title">Add Employees</h5>
								<button type="button" class="close" data-dismiss="modal" aria-label="Close">
									<span aria-hidden="true">&times;</span>
								</button>
							</div>
							<div class="modal-body">
								<div class="form-group">
									<label>Name</label>
									<input type="text" class="form-control" required>
								</div>
								<div class="form-group">
									<label>Email</label>
									<input type="emil" class="form-control" required>
								</div>
								<div class="form-group">
									<label>Address</label>
									<textarea class="form-control" required></textarea>
								</div>
								<div class="form-group">
									<label>Phone</label>
									<input type="text" class="form-control" required>
								</div>
							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
								<button type="button" class="btn btn-success">Add</button>
							</div>
						</div>
					</div>
				</div>

				<!----edit-modal end--------->





				<!----edit-modal start--------->
				<div class="modal fade" tabindex="-1" id="editEmployeeModal" role="dialog">
					<div class="modal-dialog" role="document">
						<div class="modal-content">
							<div class="modal-header">
								<h5 class="modal-title">Edit Employees</h5>
								<button type="button" class="close" data-dismiss="modal" aria-label="Close">
									<span aria-hidden="true">&times;</span>
								</button>
							</div>
							<div class="modal-body">
								<div class="form-group">
									<label>Name</label>
									<input type="text" class="form-control" required>
								</div>
								<div class="form-group">
									<label>Email</label>
									<input type="emil" class="form-control" required>
								</div>
								<div class="form-group">
									<label>Address</label>
									<textarea class="form-control" required></textarea>
								</div>
								<div class="form-group">
									<label>Phone</label>
									<input type="text" class="form-control" required>
								</div>
							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
								<button type="button" class="btn btn-success">Save</button>
							</div>
						</div>
					</div>
				</div>

				<!----edit-modal end--------->


				<!----delete-modal start--------->
				<div class="modal fade" tabindex="-1" id="deleteEmployeeModal" role="dialog">
					<div class="modal-dialog" role="document">
						<div class="modal-content">
							<div class="modal-header">
								<h5 class="modal-title">Delete Employees</h5>
								<button type="button" class="close" data-dismiss="modal" aria-label="Close">
									<span aria-hidden="true">&times;</span>
								</button>
							</div>
							<div class="modal-body">
								<p>Are you sure you want to delete this Records</p>
								<p class="text-warning"><small>this action Cannot be Undone,</small></p>
							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
								<button type="button" class="btn btn-success">Delete</button>
							</div>
						</div>
					</div>
				</div>

				<!----edit-modal end--------->




			</div>
		</div>

		<!------main-content-end----------->



		<!----footer-design------------->

		<footer class="footer">
			<div class="container-fluid">
				<div class="footer-in">
					<p class="mb-0">Soil NPK System</p>
				</div>
			</div>
		</footer>




	</div>

	</div>



	<!-------complete html----------->










</body>

</html>